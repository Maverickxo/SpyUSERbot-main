import logging

# Настройка логирования
logging.basicConfig(
    filename="message_logs.txt",
    level=logging.INFO,
    format="%(asctime)s - %(message)s"
)


def log_message(from_chat, from_id, to_chat, to_id, message):
    """
    Логирует информацию о пересылке сообщения.

    Функция записывает данные о чате-источнике, чате-получателе и содержимом пересылаемого сообщения
    в лог-файл для мониторинга пересылок.

    Параметры:
    - from_chat (str): Название чата-источника.
    - from_id (int): ID чата-источника.
    - to_chat (str): Название чата-получателя.
    - to_id (int): ID чата-получателя.
    - message (str): Текст сообщения или информация о содержимом (например, "[Медиа]").

    Формат записи в лог:
    - "<Название чата-источника> (<ID чата-источника>) -> <Название чата-получателя> (<ID чата-получателя>): <Текст сообщения>"

    Пример записи:
    - Для текстового сообщения:
        Общий чат 1 (-1001234567890) -> Целевой чат 1 (-1009876543210): Привет, как дела?
    - Для медиа-сообщения:
        Общий чат 1 (-1001234567890) -> Целевой чат 1 (-1009876543210): [Медиа]

    Логирование:
    - Данные записываются с помощью библиотеки `logging` в файл, указанный в настройках логирования.
    """

    log_entry = f"{from_chat} ({from_id}) -> {to_chat} ({to_id}): {message}"
    logging.info(log_entry)



def log_console(message):
    """
    Логирует информацию о сообщении в консоль.

    Функция выводит информацию о чате, отправителе и содержимом сообщения в консоль.
    Предназначена для отладки и мониторинга сообщений.

    Параметры:
    - message (pyrogram.types.Message): Объект сообщения, содержащий всю информацию о чате, отправителе и содержимом.

    Выводит в консоль:
    - Название чата и его ID (или пометка о личном сообщении).
    - Имя отправителя, его ID и username (если есть).
    - Содержимое сообщения (или "[Медиа]" для медиа-сообщений).

    Пример вывода:
    - Для текстового сообщения:
        Chat: Общий чат (ID: -1001234567890), User: Иван (123456789), Username: @ivanuser, Message: Привет!
    - Для медиа-сообщения:
        Chat: Общий чат (ID: -1001234567890), User: Иван (123456789), Username: @ivanuser, Message: [Медиа]
    - Для личного сообщения:
        Chat: Личное сообщение (ID: 123456789), User: Иван (123456789), Username: @ivanuser, Message: Как дела?
    """

    chat_id = message.chat.id
    chat_name = message.chat.title or "Личное сообщение"  # Название чата или пометка о личном сообщении
    user = message.from_user
    text = message.text or "[Медиа]"

    # Формируем строку для консоли
    log_entry = f"Chat: {chat_name} (ID: {chat_id}), "
    if user:
        log_entry += f"User: {user.first_name or 'Нет имени'} ({user.id}), "
        if user.username:
            log_entry += f"Username: @{user.username}, "
    else:
        log_entry += "User: неизвестен, "
    log_entry += f"Message: {text}"

    # Вывод в консоль
    print(log_entry)
